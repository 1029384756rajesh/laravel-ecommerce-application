@extends('admin.base')

@section('content')
<div class="container my-4">
    <div class="row">
        <div class="col-8" id="leftSideContainer">
            <form action="" class="my-card" style="max-width: 700px">
                <div class="my-header">Create New Product</div>

                <div class="p-4">
                    <div class="mb-3">
                        <label for="name" class="form-la">Name</label>
                        <input type="text" id="name" name="name" class="form-con">
                    </div>

                    <div class="mb-3">
                        <label for="price" class="form-la">Price</label>
                        <input type="number" id="price" name="price" class="form-con">
                    </div>

                    <div class="mb-3">
                        <label for="stock" class="form-la">Stock</label>
                        <input type="number" id="stock" name="stock" class="form-con">
                    </div>

                    <div class="mb-3">
                        <label for="short_description" class="form-la">Short Description</label>
                        <input type="number" id="short_description" name="short_description" class="form-con">
                    </div>

                    <div class="mb-3">
                        <label for="description" class="form-la">Description</label>
                        <textarea name="description" id="description" cols="30" rows="10" class="form-con"></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="category" class="form-la">Category</label>
                        <select name="category" id="category" name="category" class="form-con form-select">
                            <option value=""></option>
                            <option value="1">Tshirt</option>
                            <option value="1">Shirt</option>
                            <option value="1">Jeans</option>
                        </select>
                    </div>

                    <div class="mb-3 checkboxcontainer">
                        <input type="checkbox" id="has_variations" onchange="showAttributes(event)" class="fout checkbox">
                        <label for="has_variations" class="form-ch">Has Variations</label>
                    </div>

                    <div class="mb-3 checkboxcontainer">
                        <input type="checkbox" id="is_featured" class="fout checkbox">
                        <label for="is_featured" class="form-ch">Is Featured</label>
                    </div>

                    <button class="my-btn">Save</button>
                </div>
            </form>
        </div>

        <div class="col-4">
            <div class="my-card">
                <div class="my-header">Image</div>
                <div class="my-body">

                </div>
            </div>
            <div class="my-card">
                <div class="my-header">Gallery</div>
                <div class="my-body">

                </div>
            </div>
        </div>
    </div>
</div>
<form action="" class="my-card form-2" style="max-width: 700px; display: none;">
  <div class="my-header">
    <span>Attributes</span>
    <button onclick="addnew(event)" type="button">add new</button>
  </div>
  <div class="p-4" id="containerd">
    <div class="row">

      <div class="col-4">
        <label for="" class="form-la">Name</label>
      </div>

      <div class="col-8">
        <label for="" class="form-la">Options</label>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-4">
        <input type="text" class="form-con">
      </div>

      <div class="col-8">
        <textarea type="text" class="form-con"></textarea>
      </div>
    </div>

    <div class="row">
      <div class="col-3">
        <input type="text" class="form-con">
      </div>
      <div class="col-8">
        <div class="form-con">
          <div class="d-flex gap-2 flex-wrap align-items-center" style="font-size: 16px;" id="con"></div>
          <input type="text" class="mt-3" style="appearance: none;border:none;outline:none;width:100%;display:block;"
            onkeyup="optionChange(event)">
        </div>
      </div>
      <div class="col-1">
        <button>
          <i class="fa fa-times" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  </div>

  </div>
</form>

<script>
  function optionChange(event) {
    console.log(event.target.value);
    if (event.target.value.includes(",")) {
      event.target.placeholder = ""
      const el = document.createElement("button")
      el.type = "button"
      el.innerHTML = `
      <span style="border-right:1px solid gray; padding-right:8px; margin-right:4px;">${event.target.value.split(",")[0]}</span>
      <span class="fa fa-times" aria-hidden="true" onclick="removeItem(event)"></span>
    `
      event.target.parentElement.querySelector("#con").append(el)
      event.target.value = ""
    }
  }
  function removeItem(event) {
    console.log('all');
    event.target.parentElement.remove()
  }
  function addnew(event) {
    const con = document.createElement("div")
    con.classList.add("row")
    con.classList.add("mb-3")
    con.classList.add("containerItem")
    con.innerHTML = `

          <div class="col-3">
              <input type="text" class="form-con">
          </div>
          <div class="col-8">
              <div class="form-con">
                <div class="d-flex gap-2 flex-wrap align-items-center" style="font-size: 16px;" id="con"></div>
                <input placeholder="Write options separated by comma." type="text" class="mt-3" style="appearance: none;border:none;outline:none;width:100%;display:block;" onkeyup="optionChange(event)">
              </div>
          </div>
          <div class="col-1">
            <button onclick="removeItemContainer(event)">
              <i class="fa fa-times" aria-hidden="true"></i>
            </button>
          </div>

    `
    document.querySelector("#containerd").append(con)
  }

  function removeItemContainer(event) {
    event.target.closest(".containerItem").remove()
  }

  function showAttributes(event) {
    if (event.target.checked) {
      const form2Container = document.createElement("div")
      form2Container.classList.add("form2Container")

      form2Container.innerHTML = document.querySelector(".form-2").outerHTML
      document.querySelector("#form-tree").append(form2Container)

      form2Container.querySelector(".form-2").style.display = "block"
    } else {
      document.querySelector(".form2Container").remove()
    }

  }
</script>
@endsection